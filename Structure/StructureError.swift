//
//  StructureError.swift
//  Structure
//
//  Created by Stephen Gerstacker on 12/20/15.
//  Copyright Â© 2016 Stephen H. Gerstacker. All rights reserved.
//

import Foundation
import SQLite

/**
    Errors specific to the Structure framework.
 
    - Error: An error specific to how the Structure framework works.
    - InternalError: An error generated by the underlying SQLite API.
*/
public enum StructureError: ErrorProtocol {
    case error(String)
    case internalError(Int, String)
    
    internal static func fromSqliteResult(_ result: Int32) -> StructureError {
        
        if let errorMessage = sqlite3_errstr(result), let error = String(validatingUTF8: errorMessage) {
            return internalError(Int(result), error)
        } else {
            return internalError(0, "Unknown error")
        }
    }
}
